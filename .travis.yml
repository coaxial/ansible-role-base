---
# opt into build config validation: https://docs.travis-ci.com/user/build-config-validation
version: ~> 1.0
language: python
jobs:
  include:
    - dist: bionic
      python: "2.7"
    - dist: focal
      python: "2.7"
    - dist: bionic
      python: "3.10"
    - dist: focal
      python: "3.10"
cache: pip
install:
  - pip install ansible
  - pip install molecule
  - pip install molecule-lxd
  - .travis/setup.sh
script:
  # the python venv needs to be in the path for molecule to run
  # https://unix.stackexchange.com/questions/83191/how-to-make-sudo-preserve-path
  - sudo env "PATH=$PATH" molecule test

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
